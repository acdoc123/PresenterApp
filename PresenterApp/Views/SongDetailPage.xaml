<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="PresenterApp.Views.SongDetailPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:PresenterApp.ViewModels"
    Title="{Binding Title}"
    x:DataType="vm:SongDetailViewModel">
    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="10">
            <Label Text="Tiêu đề" />
            <Entry Placeholder="Nhập tiêu đề bài hát" Text="{Binding Song.Title}" />

            <Label Text="Tác giả / Ca sĩ" />
            <Entry Placeholder="Nhập tên tác giả hoặc ca sĩ" Text="{Binding Song.Artist}" />

            <Label Text="Tông nhạc" />
            <Entry Placeholder="Ví dụ: C, Am, G..." Text="{Binding Song.Key}" />

            <Label Text="Lời bài hát (sử dụng [Điệp khúc], [Phiên khúc 1]... để đánh dấu)" />
            <Editor
                AutoSize="Disabled"
                HeightRequest="300"
                Placeholder="Nhập lời bài hát tại đây"
                Text="{Binding Song.Lyrics}" />

            <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                <Button
                    Grid.Column="0"
                    Command="{Binding SaveSongCommand}"
                    IsEnabled="{Binding IsNotBusy}"
                    Text="Lưu" />
                <Button
                    Grid.Column="1"
                    Command="{Binding ExportToPptxCommand}"
                    IsEnabled="{Binding IsNotBusy}"
                    Text="Xuất ra PPTX" />
            </Grid>

            <Button
                BackgroundColor="Red"
                Command="{Binding DeleteSongCommand}"
                IsEnabled="{Binding IsNotBusy}"
                IsVisible="{Binding Song.Id, Converter={StaticResource IntToBoolConverter}}"
                Text="Xóa bài hát" />

            <ActivityIndicator
                HorizontalOptions="Center"
                IsRunning="{Binding IsBusy}"
                IsVisible="{Binding IsBusy}"
                VerticalOptions="Center" />

        </VerticalStackLayout>
    </ScrollView>
    <ContentPage.Resources>
        <ResourceDictionary>
            <local:IntToBoolConverter xmlns:local="clr-namespace:PresenterApp.Views" x:Key="IntToBoolConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>
</ContentPage>